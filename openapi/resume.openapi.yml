openapi: '3.0.3'
info:
  title: JSON Resume API
  description: >-
    An API standard for retrieving resumes in JSON format, predominantly aligned with the JSON resume standard:
    https://jsonresume.org/
  version: 1.1.0

tags:
  - name: Resume
    description: >-
      A consent to access account information resources

servers:
  - url: https://localhost:3000/
    description: Local development server

security:
  - OAuth:
      - read
      - write

paths:
  /resume:
    get:
      summary: Get Resume
      tags:
        - Resume
      responses:
        200:
          description: Get resume successful
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Resume'
        401:
          $ref: '#/components/responses/401ErrorResponse'
        403:
          $ref: '#/components/responses/403ErrorResponse'
        404:
          $ref: '#/components/responses/404ErrorResponse'
        406:
          $ref: '#/components/responses/406ErrorResponse'
        429:
          $ref: '#/components/responses/429ErrorResponse'
        default:
          $ref: '#/components/responses/5XXErrorResponse'
    post:
      summary: Create Resume
      tags:
        - Resume
      requestBody:
        description: Resume body
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/Resume'
      responses:
        201:
          description: Create resource successful
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Resume'
        400:
          $ref: '#/components/responses/400ErrorResponse'
        401:
          $ref: '#/components/responses/401ErrorResponse'
        403:
          $ref: '#/components/responses/403ErrorResponse'
        404:
          $ref: '#/components/responses/404ErrorResponse'
        406:
          $ref: '#/components/responses/406ErrorResponse'
        409:
          $ref: '#/components/responses/409ErrorResponse'
        415:
          $ref: '#/components/responses/415ErrorResponse'
        429:
          $ref: '#/components/responses/429ErrorResponse'
        default:
          $ref: '#/components/responses/5XXErrorResponse'
    put:
      summary: Update Existing Resume
      tags:
        - Resume
      requestBody:
        description: Resume body
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/Resume'
      responses:
        200:
          description: Successfully updated resource
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Resume'
        400:
          $ref: '#/components/responses/400ErrorResponse'
        401:
          $ref: '#/components/responses/401ErrorResponse'
        403:
          $ref: '#/components/responses/403ErrorResponse'
        404:
          $ref: '#/components/responses/404ErrorResponse'
        406:
          $ref: '#/components/responses/406ErrorResponse'
        409:
          $ref: '#/components/responses/409ErrorResponse'
        415:
          $ref: '#/components/responses/415ErrorResponse'
        429:
          $ref: '#/components/responses/429ErrorResponse'
        default:
          $ref: '#/components/responses/5XXErrorResponse'
    delete:
      summary: Delete Users
      tags:
        - Resume
      responses:
        204:
          description: Successfully deleted resource
        401:
          $ref: '#/components/responses/401ErrorResponse'
        403:
          $ref: '#/components/responses/403ErrorResponse'
        404:
          $ref: '#/components/responses/404ErrorResponse'
        406:
          $ref: '#/components/responses/406ErrorResponse'
        429:
          $ref: '#/components/responses/429ErrorResponse'
        default:
          $ref: '#/components/responses/5XXErrorResponse'

  /resume/{userId}:
    get:
      summary: Get Resume
      tags:
        - Resume
      parameters:
        - $ref: '#/components/parameters/UserId'
      responses:
        200:
          description: Get resource successful
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Resume'
        401:
          $ref: '#/components/responses/401ErrorResponse'
        403:
          $ref: '#/components/responses/403ErrorResponse'
        404:
          $ref: '#/components/responses/404ErrorResponse'
        406:
          $ref: '#/components/responses/406ErrorResponse'
        429:
          $ref: '#/components/responses/429ErrorResponse'
        default:
          $ref: '#/components/responses/5XXErrorResponse'

components:
  securitySchemes:
    OAuth:
      type: oauth2
      flows:
        authorizationCode:
          authorizationUrl: /oauth/authorize
          tokenUrl: /oauth/token
          scopes:
            read: Read resumes
            write: Modify resume
  schemas:
    Resume:
      type: object
      additionalProperties: false
      description: |
        https://github.com/jsonresume/resume-schema/blob/master/schema.json
      required:
        - basics
      properties:
        basics:
          $ref: '#/components/schemas/Basics'
        work:
          type: array
          maxItems: 256
          items:
            $ref: '#/components/schemas/Work'
        volunteer:
          type: array
          maxItems: 256
          items:
            $ref: '#/components/schemas/Volunteer'
        education:
          type: array
          maxItems: 256
          items:
            $ref: '#/components/schemas/Education'
        awards:
          type: array
          maxItems: 256
          items:
            $ref: '#/components/schemas/Award'
        certificates:
          type: array
          maxItems: 256
          items:
            $ref: '#/components/schemas/Certificate'
        publications:
          type: array
          maxItems: 256
          items:
            $ref: '#/components/schemas/Publication'
        skills:
          type: array
          maxItems: 512
          items:
            $ref: '#/components/schemas/Skill'
        languages:
          type: array
          maxItems: 512
          items:
            $ref: '#/components/schemas/Language'
        interests:
          type: array
          maxItems: 256
          items:
            $ref: '#/components/schemas/Interest'
        references:
          type: array
          maxItems: 256
          items:
            $ref: '#/components/schemas/Reference'
        projects:
          type: array
          maxItems: 256
          items:
            $ref: '#/components/schemas/Project'

    Basics:
      type: object
      additionalProperties: true
      properties:
        name:
          type: string
          maxLength: 256
        label:
          type: string
          description: e.g. Web Developer
          maxLength: 256
        image:
          type: string
          description: URL (as per RFC 3986) to a image in JPEG or PNG format
          format: uri
          maxLength: 2048 # RFC 7230
        email:
          type: string
          description: e.g. thomas@gmail.com
          format: email
          maxLength: 254 # RFC 5321
        phone:
          type: string
          maxLength: 32
          description:
            Phone numbers are stored as strings so use any format you like,
            e.g. 712-117-2923
        url:
          type: string
          description: URL (as per RFC 3986) to your website, e.g. personal homepage
          format: uri
          maxLength: 2048 # RFC 7230
        summary:
          type: string
          description: Write a short 2-3 sentence biography about yourself
          maxLength: 8192
        location:
          type: object
          additionalProperties: true
          properties:
            address:
              type: string
              description:
                "To add multiple address lines, use \n. For example, 1234
                Main Street\nCentral Building, Level 2."
            postalCode:
              type: string
            city:
              type: string
            countryCode:
              type: string
              description: code as per ISO-3166-1 ALPHA-2, e.g. US, AU, IN
            region:
              type: string
              description:
                The general region where you live. Can be a US state, or
                a province, for instance.
        profiles:
          type: array
          description: Specify any number of social networks that you participate in
          additionalProperties: false
          items:
            type: object
            additionalProperties: true
            maxItems: 128
            properties:
              network:
                type: string
                maxLength: 256
                description: e.g. Facebook or Twitter
              username:
                type: string
                maxLength: 256
                description: e.g. user01
              url:
                type: string
                description: e.g. http://twitter.example.com/user01
                format: uri
                maxLength: 2048 # RFC 7230

    Work:
      type: object
      additionalProperties: true
      properties:
        name:
          type: string
          description: e.g. Facebook
        location:
          type: string
          description: e.g. Menlo Park, CA
        description:
          type: string
          description: e.g. Social Media Company
        position:
          type: string
          description: e.g. Software Engineer
        url:
          type: string
          description: e.g. http://facebook.example.com
          format: uri
          maxLength: 2048 # RFC 7230
        startDate:
          type: string
          format: date
        endDate:
          type: string
          format: date
        summary:
          type: string
          description: Give an overview of your responsibilities at the company
        highlights:
          type: array
          description: Specify multiple accomplishments
          maxItems: 128
          items:
            type: string
            description: e.g. Increased profits by 20% from 2011-2012 through viral advertising

    Volunteer:
      type: object
      additionalProperties: true
      properties:
        organization:
          type: string
          description: e.g. Facebook
        position:
          type: string
          description: e.g. Software Engineer
        url:
          type: string
          description: e.g. http://facebook.example.com
          format: uri
          maxLength: 2048 # RFC 7230
        startDate:
          type: string
          format: date
        endDate:
          type: string
          format: date
        summary:
          type: string
          description: Give an overview of your responsibilities at the company
        highlights:
          type: array
          description: Specify accomplishments and achievements
          items:
            type: string
            description: e.g. Increased profits by 20% from 2011-2012 through viral advertising

    Education:
      type: object
      additionalProperties: false
      properties:
        institution:
          type: string
          description: e.g. Massachusetts Institute of Technology
        url:
          type: string
          description: e.g. http://facebook.example.com
          format: uri
          maxLength: 2048 # RFC 7230
        area:
          type: string
          description: e.g. Arts
        studyType:
          type: string
          description: e.g. Bachelor
        startDate:
          type: string
          format: date
        endDate:
          type: string
          format: date
        score:
          type: string
          description: grade point average, e.g. 3.67/4.0
        courses:
          type: array
          description: List notable courses/subjects
          items:
            type: string
            description: e.g. H1302 - Introduction to American history

    Award:
      type: object
      additionalProperties: true
      properties:
        title:
          type: string
          description: e.g. One of the 100 greatest minds of the century
        date:
          type: string
          format: date
        awarder:
          type: string
          description: e.g. Time Magazine
        summary:
          type: string
          description: e.g. Received for my work with Quantum Physics

    Certificate:
      type: object
      additionalProperties: true
      properties:
        name:
          type: string
          description: e.g. Certified Kubernetes Administrator
        date:
          type: string
          description: e.g. 1989-06-12
          format: date
        url:
          type: string
          description: e.g. http://example.com
          format: uri
          maxLength: 2048 # RFC 7230
        issuer:
          type: string
          description: e.g. CNCF

    Publication:
      type: object
      additionalProperties: true
      properties:
        name:
          type: string
          description: e.g. The World Wide Web
        publisher:
          type: string
          description: e.g. IEEE, Computer Magazine
        releaseDate:
          type: string
          format: date
        url:
          type: string
          description: e.g. https://www.example.com
          format: uri
          maxLength: 2048 # RFC 7230
        summary:
          type: string
          description: Short summary of publication. e.g. Discussion of the World Wide Web, HTTP, HTML.

    Skill:
      type: object
      additionalProperties: true
      properties:
        name:
          type: string
          description: e.g. Web Development
          maxLength: 256
        level:
          type: string
          description: e.g. Master
        keywords:
          type: array
          description: List some keywords pertaining to this skill
          items:
            type: string
            description: e.g. HTML

    Language:
      type: object
      additionalProperties: true
      properties:
        language:
          type: string
          maxLength: 64
          description: e.g. English, Spanish
        fluency:
          description: >-
            Language fluency according to the ILR scale
            https://en.wikipedia.org/wiki/ILR_scale
          type: string
          enum:
            - No proficiency
            - Elementary
            - Limited working
            - Professional working
            - Full professional
            - Native or bilingual

    Interest:
      type: object
      additionalProperties: true
      properties:
        name:
          type: string
          description: e.g. Philosophy
          maxLength: 256
        keywords:
          type: array
          maxItems: 256
          items:
            type: string
            maxLength: 64
            description: e.g. Friedrich Nietzsche

    Reference:
      type: object
      additionalProperties: true
      properties:
        name:
          type: string
          description: e.g. Timothy Cook
          maxLength: 256
        reference:
          type: string
          maxLength: 8192
          description:
            e.g. Joe blogs was a great employee, who turned up to work
            at least once a week. He exceeded my expectations when it came to doing
            nothing.

    Project:
      type: object
      additionalProperties: true
      properties:
        name:
          type: string
          description: e.g. The World Wide Web
          maxLength: 256
        description:
          type: string
          description: Short summary of project. e.g. Collated works of 2017.
          maxLength: 256
        highlights:
          type: array
          description: Specify multiple features
          items:
            type: string
            description: e.g. Directs you close but not quite there
        keywords:
          type: array
          description: Specify special elements involved
          items:
            type: string
            description: e.g. AngularJS
        startDate:
          type: string
          format: date
        endDate:
          type: string
          format: date
        url:
          type: string
          description: e.g. http://www.example.com
          format: uri
          maxLength: 2048 # RFC 7230
        roles:
          type: array
          description: Specify your role on this project or in company
          items:
            type: string
            description: e.g. Team Lead, Speaker, Writer
        entity:
          type: string
          maxLength: 512
          description:
            Specify the relevant company/entity affiliations e.g. 'greenpeace',
            'corporationXYZ'
        type:
          type: string
          maxLength: 256
          description: e.g. 'volunteering', 'presentation', 'talk', 'application', 'conference'

    Error:
      type: object
      description: A Problem Details object (https://datatracker.ietf.org/doc/html/rfc7807)
      minProperties: 1
      additionalProperties: true
      properties:
        type:
          type: string
          description: A URI reference that identifies the problem type.
          format: uri
          maxLength: 2048 # RFC 7230
        title:
          type: string
          description: A short, human-readable summary of the problem.
          example: Service Unavailable
          maxLength: 128
        status:
          type: integer
          description: The HTTP status code generated by the origin server for this occurrence of the problem.
          format: int32
          minimum: 400
          maximum: 600
          exclusiveMaximum: true
          example: 503
        detail:
          type: string
          description: A human-readable explanation specific to this occurrence of the problem.
          maxLength: 1024
        instance:
          type: string
          description: A URI reference that identifies the specific occurrence of the problem.
          format: uri
          maxLength: 2048 # RFC 7230

  parameters:
    UserId:
      in: path
      name: userId
      description: Unique id of the owner of the resume
      required: true
      schema:
        maxLength: 64
        type: string
    ResumeId:
      in: path
      name: resumeId
      description: Unique id of the resume
      required: true
      schema:
        maxLength: 64
        type: string

  responses:
    400ErrorResponse:
      description: Bad Request
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/Error'
    401ErrorResponse:
      description: Unauthorized
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/Error'
    403ErrorResponse:
      description: Forbidden
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/Error'
    404ErrorResponse:
      description: Not Found
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/Error'
    406ErrorResponse:
      description: Not Acceptable
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/Error'
    409ErrorResponse:
      description: Conflict
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/Error'
    415ErrorResponse:
      description: Unsupported Media Type
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/Error'
    429ErrorResponse:
      description: Too Many Requests
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/Error'
    5XXErrorResponse:
      description: Unexpected Error
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/Error'
